{"autoexec":"\njs: outputbox.style.fontSize=\"1.5em\"\nlist\n","better ed":"\n[ ] ed move to above outputbox\n\njs> $(\"#inputbox\").css(\"background-color\") tib. \\ it works !\njs> $(\"#inputbox\").css(\"width\") tib. \\ it works !\njs> $(\"#inputbox\")[0].style (see) \\ this works on Chrome but will hangup the system, but not in HTA.\n\n\\ 既然 style 多少可以檢查, CSS 多難搞也應該好多了。再加上 F12 debugger 試試看, 無效的 CSS 是否有觸發 error in F12?\n\n\n\n\nstop\n\t: (ed2) ( -- edit_box_element ) \\ Create an HTML5 local storage edit box in outputbox\n\t\t<text> \n\t\t\t<style type=\"text/css\">\n\t\t\t\t.eb div { \n\t\t\t\t\twidth:90%;\n\t\t\t\t\tborder:1px solid black;\n\t\t\t\t}\n\t\t\t\t.eb p {\n\t\t\t\t\tdisplay:inline;\n\t\t\t\t}\n\t\t\t</style>\n            <div class=eb>\n\t\t\t<p>Local Storage Field </p>\n\t\t\t<input class=ebname type=text value=\"\"></input>\n\t\t\t<p>\n\t\t\t<input type=button value='Saved' class=ebsave>\n\t\t\t<input type=button value='Read' class=ebread>\n\t\t\t<input type=button value='Edit' class=ebedit>\n\t\t\t<input type=button value='Delete' class=ebdelete>\n\t\t\t<input type=button value='Read only' class=ebreadonly>\n\t\t\t<input type=button value='Close' class=ebclose>\n\t\t\t<input type=button value='Run' class=ebrun>\n\t\t\t</p>\n\t\t\t<textarea class=ebtextarea style=\"margin-top:1em;\" rows=20 wrap=\"off\"></textarea>\n\t\t</div></text> \n\t\t:> replace(/[/]\\*(.|\\r|\\n)*?\\*[/]/mg,\"\") \\ clean /* comments */ \n\t\t</o> ( eb ) js: window.scrollTo(0,tos().offsetTop-50) ( eb )\n\t\tinit-buttons ;\n\t\n\t: ed2 (ed2) drop ; // ( -- ) Create an HTML5 local storage edit box in outputbox\nstop\t\n<o> <input type=file></input></o> tib. \\ Choose a file from local computer\n<o> <input type=checkbox></input></o> tib. \\ A toggling check box\n<o> <input type=hidden></input></o> tib. \\ 看不出甚麼東西\n<o> <input type=image></input></o> tib. \\ Image, what image?\n<o> <input type=password></input></o> tib. \\ It's a text input box\n<o> <input type=radio></input></o> tib. \\ Radio button expected\n<o> <input type=reset></input></o> tib. \\ Reset button\n<o> <input type=submit></input></o> tib. \\ Submit button\n<o> <input type=text></input></o> tib. \\ 類似 textarea or password 的 text box\n\n\t\\ Maintain source code in HTML5 local storage directly\n\n\ts\" ls.f\"\t\tsource-code-header\n\t\n\t: (eb.parent) ( node -- eb ) \\ Get the parent edit box object of the given node/element.\n\t\tjs> $(pop()).parents('.eb')[0] ( eb ) ;\n\n\t: eb.edit ( btn -- ) \\ Make the textarea and the name editable.\n\t\t(eb.parent) ( eb ) \\ The input object can be any node of the editbox.\n\t\tjs: $('.ebname',tos())[0].contentEditable=true\n\t\tjs: $('textarea',pop())[0].readOnly=false ;\n\t\t\n\t: eb.readonly ( btn -- ) \\  Make the textarea and the name read-only.\n\t\t(eb.parent) ( eb ) \\ The input object can be any node of the editbox.\n\t\tjs: $('.ebname',tos())[0].contentEditable=false\n\t\tjs: $('textarea',pop())[0].readOnly=true ;\n\n\t: eb.save ( btn -- ) \\ Save the textarea to localStorate[name].\n\t\t(eb.parent) ( eb ) \\ The input object can be any node of the editbox.\n\t\tjs> $('.ebname',tos())[0].innerText trim ( eb name )\n\t\tjs> $('textarea',tos(1))[0].value ( eb name text )\n\t\tjs: storage.set(pop(1),pop()) ( eb )\n\t\tjs: $('.ebsave',pop())[0].value=\"Saved\" ;\n\t\t\n\t: (eb.read) ( eb field_name -- ) \\  Read the localStorate[name] to textarea of the given edit box.\n\t\tjs> storage.get(tos())  ( eb name text|undefined ) \n\t\tjs> tos()==undefined if  ( eb name text|undefined ) \n\t\t\t<js> alert(\"Error! can't find '\" + pop(1) + \"' in local storage.\")</js>\n\t\t\t2drop exit\n\t\tthen  nip ( eb text )\n\t\tjs> $('.ebsave',tos(1))[0].value==\"Save\" if  ( eb text )\n\t\t\t<js> confirm(\"Unsaved local storage edit box will be overwritten, are you sure?\") </jsV> \n\t\t\tif else 2drop exit then\n\t\tthen  ( eb text )\n\t\tjs: $('textarea',tos(1))[0].value=pop()\n\t\tjs: $('.ebsave',pop())[0].value=\"Saved\" ;\n\t\n\t: eb.read ( btn -- ) \\ Read the localStorate[name] to textarea.\n\t\t(eb.parent) ( eb ) \\ The input object can be any node of the editbox.\n\t\tjs> $('.ebname',tos())[0].innerText trim ( eb name ) (eb.read) ;\n\t\t\n\t: eb.close ( btn -- ) \\ Close the local storage edit box to stop editing.\n\t\t(eb.parent) ( eb ) \\ The input object can be any node of the editbox.\n\t\tjs> $('.ebsave',tos())[0].value==\"Save\" if \n\t\t\t<js> confirm(\"Are you sure you want to clsoe the unsaved local storage edit box?\") </jsV> \n\t\t\tif else exit then\n\t\tthen ( eb ) removeElement ;\n\n\t: eb.delete ( btn -- ) \\ Delete the local storage edit box and the local storage field.\n\t\t(eb.parent) ( eb ) \\ The input object can be any node of the editbox.\n\t\t<js> $('textarea',tos())[0].value.indexOf(\"delete me no regret\")!=0</jsV>\n\t\tif <js> alert('Place \"delete me no regret\" at the very beginning of the textarea to demonstrate yor guts.') </js> drop exit then\n\t\tjs> $('.ebname',tos())[0].innerText trim ( eb name ) \n\t\tjs: storage.del(pop()) ( eb ) removeElement ;\n\n\t: eb.run ( btn -- ) \\ Run FORTH source code of the local storage edit box.\n\t\t(eb.parent) ( eb ) \\ The input object can be any node of the editbox.\n\t\tjs: dictate($('textarea',pop())[0].value) ;\n\t\t\n\t: eb.onchange ( btn -- ) \\ Event handler on local storage edit box has changed\n\t\t(eb.parent) ( eb ) \\ The input object can be any node of the editbox.\n\t\t<js> $(\".ebsave\",pop())[0].value=\"Don't forget to SAVE !\"</js> ;\n\n\t: init-buttons ( eb -- eb ) \\ Initialize buttons of the local storage edit box.\n\t\t<js> $(\".ebsave\",    tos())[0].onclick =function(e){push(this);execute(\"eb.save\");    return(false)}</js>\n\t\t<js> $(\".ebread\",    tos())[0].onclick =function(e){push(this);execute(\"eb.read\");    return(false)}</js>\n\t\t<js> $(\".ebedit\",    tos())[0].onclick =function(e){push(this);execute(\"eb.edit\");    return(false)}</js>\n\t\t<js> $(\".ebreadonly\",tos())[0].onclick =function(e){push(this);execute(\"eb.readonly\");return(false)}</js>\n\t\t<js> $(\".ebclose\",   tos())[0].onclick =function(e){push(this);execute(\"eb.close\");   return(false)}</js>\n\t\t<js> $(\".ebrun\",     tos())[0].onclick =function(e){push(this);execute(\"eb.run\");     return(false)}</js> \n\t\t<js> $(\".ebdelete\",  tos())[0].onclick =function(e){push(this);execute(\"eb.delete\");  return(false)}</js> \n\t\t<js> $(\".ebtextarea\",tos())[0].onchange=function(e){push(this);execute(\"eb.onchange\");return(false)}</js> \n\t\t<js> \n\t\t\t$(\".ebtextarea\",tos())[0].onkeydown = function(e) {\n\t\t\t\te = (e) ? e : event; \n\t\t\t\tvar keycode = (e.keyCode) ? e.keyCode : (e.which) ? e.which : false;\n\t\t\t\tswitch(keycode) {\n\t\t\t\t\tcase  83: /* s */\n\t\t\t\t\t\tif (e&&e.ctrlKey) {\n\t\t\t\t\t\t\tpush(this); // ( textarea ) \n\t\t\t\t\t\t\texecute(\"eb.save\");\n\t\t\t\t\t\t\tvar temp=this.value;this.value=\"\";this.value=temp; // Saved already so clear the onchange status\n\t\t\t\t\t\t\te.stopPropagation ? e.stopPropagation() : (e.cancelBubble=true); // stop bubbling\n\t\t\t\t\t\t\treturn(false);\n\t\t\t\t\t\t}\n\t\t\t\t\tdefault: return (true); // pass down to following handlers\n\t\t\t\t}\n\t\t\t}\n\t\t</js> ;\n\njs> $(\"input\",$(\".eb\")[1])[0].value . \\ the input type=text field name \naaa bbb ccc  OK \n\n直接看 inputbox 的 .style 可否? --> 可以!\njs> $(\"#inputbox\").css(\"font-size\") . \\ ==> 20px \n\n\n\n"}