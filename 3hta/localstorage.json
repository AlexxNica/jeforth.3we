{"autoexec old":"{\"name\":\"autoexec\",\"readonly\":false,\"codemode\":\"true\",\"doc\":\"\\njs> vm.appname==\\\"jeforth.3hta\\\" [if] s\\\" Style for 3HTA on different computers with auto detect\\\" (run) [then]\\n\\n<comment>\\njs: outputbox.style.fontSize=\\\"1.5em\\\"\\ncr .( Launch the briefing ) cr\\n<o> <iframe src=\\\"http://note.youdao.com/share/?id=79f8bd1b7d0a6174ff52e700dbadd1b2&type=note\\\"\\nname=\\\"An introduction to jeforth.3ce\\\" align=\\\"center\\\" width=\\\"96%\\\" height=\\\"1000px\\\"\\nmarginwidth=\\\"1\\\" marginheight=\\\"1\\\" frameborder=\\\"1\\\" scrolling=\\\"Yes\\\"> </iframe></o> drop\\ncr cr \\n.( execute the 'list' command ) cr\\nlist\\n</comment>\",\"mode\":true}","autoexec":"{\"name\":\"autoexec\",\"readonly\":false,\"codemode\":\"true\",\"doc\":\"\\n\\\\ js> vm.appname==\\\"jeforth.3hta\\\" [if] s\\\" Style for 3HTA on different computers with auto detect\\\" (run) [then]\\n\\n<comment>\\njs: outputbox.style.fontSize=\\\"1.5em\\\"\\ncr .( Launch the briefing ) cr\\n<o> <iframe src=\\\"http://note.youdao.com/share/?id=79f8bd1b7d0a6174ff52e700dbadd1b2&type=note\\\"\\nname=\\\"An introduction to jeforth.3ce\\\" align=\\\"center\\\" width=\\\"96%\\\" height=\\\"1000px\\\"\\nmarginwidth=\\\"1\\\" marginheight=\\\"1\\\" frameborder=\\\"1\\\" scrolling=\\\"Yes\\\"> </iframe></o> drop\\ncr cr \\n.( execute the 'list' command ) cr\\nlist\\n</comment>\",\"mode\":true}","Play with numeric.js":"{\"doc\":\"\\ncls \\n\\\\ Linear algebra example. We start with a matrix.\\n<js>\\nvar A = [[1,2,3],\\n         [4,5,6],\\n         [7,3,9]]; A </jsV> value A\\n\\n\\\\ Let's also make a vector.\\n<js> var x = [3,1,2]; x </jsV> value x\\n\\n\\\\ Matrix-vector product.  b = A (.) x\\n<js> var b = numeric.dot(vm.g.A,vm.g.x); b </jsV> value b b (see)\\n\\n\\\\ Matrix inverse.  ~A \\n<js> var Ainv = numeric.inv(vm.g.A); Ainv </jsV> value Ainv \\nAinv (see)\\n\\n\\\\ Let's check it:   ~A (.) b = x Bingo!!!!\\n<js> numeric.dot(vm.g.Ainv,vm.g.b); </jsV> (see)\\n\\n\\\\ Determinant\\n<js> numeric.det(vm.g.A); </jsV> cr tib. \\n\\n\\\\ Sin wave\\n<js> var x = numeric.linspace(0,6.3,25); x </jsV> to x x (see)\\n\\n<js> var y = numeric.sin(vm.g.x); y </jsV> value y y (see)\\n\\n\\n\\n\\nstop\\njs> numeric tib.\\n\\nstop\\njs> vm.appname==\\\"jeforth.3hta\\\" [if] char js/numeric-1.2.6.js\\n[else] char http://www.numericjs.com/lib/numeric-1.2.6.js [then]\\nreadTextFile \\\\ 先讀取 .js 檔, 但不能直接用\\n<text> \\nwindow.numeric = numeric;  // 先對 source 做一點必要的加工, 把 numeric 掛上 global \\n</text> + </js> \\\\ 然後才執行\\t\\n\\nstop\\n\\\\ Also hosted on BootCDN.cn\\n\\\\ http://cdn.bootcss.com/numeric/1.2.6/numeric.js\\n\\n\\\\ These lines works fine! Test ok on 3ce, 3hta ADO reads only local files\\n\\\\ so the path should be only \\\"js/numeric-1.2.6.js\\\",\\n\\nchar     http://localhost:8888/js/numeric-1.2.6.js     readTextFile tib.\\nchar http://www.numericjs.com/lib/numeric-1.2.6.js     readTextFile tib.\\nchar http://www.numericjs.com/lib/numeric-1.2.6.min.js readTextFile tib.\\n\\n\\n\",\"mode\":true,\"readonly\":false}","lab":"{\"name\":\"lab\",\"readonly\":false,\"mode\":true,\"doc\":\"------- 實驗使用 (dictate) 的方式確保其完成工作 ----------------------------\\n\\n        \\\\ 下達指令去 target page 讀取 source code\\n        <text> \\n            char not-read-yet \\\\ flag\\n            100 nap js> $(\\\"body\\\")[0].outerHTML \\n            drop char already-read \\\\ flag\\n        </text> (dictate)\\n        \\\\ 必要步驟等待(dictate)完成\\n        100 [for] tos<target . cr [next]\\n        \\\\ 本實驗成功! 任何用到 (dictate) 之處皆應比照改寫。\\n\\n    \\\\ Pack up the message \\n        js> $(\\\"body\\\")[0].outerHTML ( HTML ) debug* 11>>\\n        <js> chrome.runtime.sendMessage({addr:\\\"</text> \\n        myTabId + s' \\\",tos:pop()})</js>' + (dictate) \\n    \\\\ 必要步驟等待(dictate)完成\\n        [begin] 100 nap js> tos()!=\\\"\\\" [until] nip \\n    \\\\ 在 outputbox 產生本頁然後搬到它上面去，避免沿用到 outputbox 的 style\\n        </o> constant article article js> outputbox insertBefore\\n\\n\\n\\n\\n\\n-------------------------------------------------------------------------------\\n    \\\\ 利用 3ce 抓網頁文章\\n    \\\\ 實用版只抓 article ... 正確使用 (dictate) \\n    cls \\\"\\\" ( flag for detecting if dictate has completed ) \\n    \\\\ Remove .console3we from the target page\\n        <text> \\n            [begin] js> $(\\\".console3we\\\") js> tos().length \\n            [if] :> [0] removeElement false [else] drop true [then] \\n            [until]\\n    \\\\ Pack up the message \\n        js> $(\\\"body\\\")[0].outerHTML ( HTML ) debug* 11>>\\n        <js> chrome.runtime.sendMessage({addr:\\\"</text> \\n        myTabId + s' \\\",tos:pop()})</js>' + (dictate) \\n    \\\\ 必要步驟等待(dictate)完成\\n        [begin] 100 nap js> tos()!=\\\"\\\" [until] nip \\n    \\\\ 在 outputbox 產生本頁然後搬到它上面去，避免沿用到 outputbox 的 style\\n        </o> constant article article js> outputbox insertBefore\\n\\n\\n\\n-------------------------------------------------\\n: tos<target ( -- x ) \\\\ 3ce extension pages get and consumes the TOS from the target page\\n    char NotYet s' <js> chrome.runtime.sendMessage({addr:\\\"'\\n    myTabId + s' \\\",tos:pop()})</js>' + (dictate) \\n    begin js> tos()==\\\"NotYet\\\" while 100 nap repeat nip ;\\n    /// for 3ce extension pages and popup page only\\n\\n: tos>target ( x -- ) \\\\ Send TOS to the target page\\n    js> ({tos:pop()}) message->tabid ;\\n    /// for 3ce target page only\\n\\n\\n\\n\"}","Style for 3HTA on different computers with auto detect":"{\"doc\":\"char %computername% env@ char DESKTOP-Q4DUVFG === [if] ( is my desktop at home )\\n    <o> <h3> Style for desktop at home 3HTA</h3></o> drop\\n    js: outputbox.style.fontSize=\\\"1.5em\\\"\\n    js: inputbox.style.fontSize=\\\"1.5em\\\"\\n    editbox-style <text>\\n    .eb .box { width:90%; font-size:1.1em; /* filename */ } \\n    .eb .box, .eb .ebhtmlarea { border:1px solid black; }\\n    .eb .ebtextarea { font-size:1.2em }\\n    .eb input { font-size:0.7em /* buttons */ }\\n    .eb p { display:inline; }\\n    .eb .ebname { font-size: 1em; } /* field name */\\n    </text> js: $(\\\"#ebstyle\\\")[0].innerHTML=pop() \\\\ 直接修改 ebstyle \\n[then]\\n\\nchar %computername% env@ char WKS-31ENA852 === [if] ( X1 Yoga OA notebook )\\n    <o> <h3> Style for OA X1 Yoga</h3></o> drop\\n    js: outputbox.style.fontSize=\\\"1.1em\\\"\\n    js: inputbox.style.fontSize=\\\"1.1em\\\"\\n    editbox-style <text>\\n    .eb .box { width:90%; font-size:1.1em; /* filename */ } \\n    .eb .box, .eb .ebhtmlarea { border:1px solid black; }\\n    .eb .ebtextarea { font-size:1.1em }\\n    .eb input { font-size:0.7em /* buttons */ }\\n    .eb p { display:inline; }\\n    .eb .ebname { font-size: 1em; } /* field name */\\n    </text> js: $(\\\"#ebstyle\\\")[0].innerHTML=pop() \\\\ 直接修改 ebstyle \\n[then]\\n\\nchar %computername% env@ char WKS-4AEN0404 === [if] ( T550 OA notebook )\\n    <o> <h3> Style for OA T550</h3></o> drop\\n    js: outputbox.style.fontSize=\\\"1.5em\\\"\\n    js: inputbox.style.fontSize=\\\"1.5em\\\"\\n    editbox-style <text>\\n    .eb .box { width:90%; font-size:1.2em; /* filename */ } \\n    .eb .box, .eb .ebhtmlarea { border:1px solid black; }\\n    .eb .ebtextarea { font-size:1.2em }\\n    .eb input { font-size:0.7em /* buttons */ }\\n    .eb p { display:inline; }\\n    .eb .ebname { font-size: 0.8em; } /* field name */\\n    </text> js: $(\\\"#ebstyle\\\")[0].innerHTML=pop() \\\\ 直接修改 ebstyle \\n[then]\\n\\ncr\\n\",\"mode\":true,\"readonly\":false}","3HTA Log 2016-08-31":"{\"doc\":\"[x] Solar-system.f 再改良, 畫面精簡, 指向文章去解釋。\\n[x] 準備 release master 新版, search \\\"kvm.minor_version\\\"\\n    全部加 200 代表 GitHub master release 的版號。\\n    [x] jeforth.3nd.js --> version 2 -> 202\\n    [x] jeforth.3nw.html, /package.json -> version 22 -> 222\\n    [x] jeforth.3htm.js --> to be version 2 now -> 202\\n    [x] jeforth.3ce.js(3ce extension pages)-> 202\\n    [x] jeforth.3ce, ce.f(Target page) -> 202\\n    [x] jeforth.3ce, background.js -> 202\\n    [x] jeforth.hta --> <HTA> tag. to be version 3 now -> 203 \\n    [x] GitHub read me should feature the published 3ce Chrome extension.\\n        --> feature the Wiki page would be even better. Ynote\\n            is in trouble of censorship.\\n    [x] README.md 上的 demo 也要改寫好一點。最好能有浮動 console3we 框。\\n        --> 先把結構改好, link 出去的內容先弄成 under constructing. 日起有功,穩步推進。\\n    [x] excel.f introduction add to wiki and link to readme.md\\n        --> done\\n\\n[x] 3nw.bat can't run when the root folder is \\\"jeforth.3we-master\\\" instead of\\n    \\\"jeforth.3we\\\" \\n    start nw ../jeforth.3we %1 %2 %3 %4 %5 %6 %7 %8 %9\\n    --> folder name must be jeforth.3we can't be ~-master or ~-develop.\\n        because 3nw.bat command line must be \\\"start nw ../jeforth.3we ...\\\"\\n\\n[x] excel.app.count not correct some times. see-excel is good. \\n    --> excel.app.count redesigned, it's now dynamic.\\n[x] ls.f autoexec should not be run when having argv.\\n    [x] We need 'args' to know if there were jobs to do from command line\\n        [x] 3hta [x] 3htm [x] 3ce [x] 3nd [x] 3nw\\n[x] arrow works but there are error messages flashes before\\n    the arrow box.\\n[x] nested <text></text> puts master tutor-cloth.f in trouble\\n    --> fixed in develop already, waiting to relase new master.\\n[ ] 檔案擺放的 rule 應該要寫成專文放在 wiki 下。\\n[ ] 以下整頓的理由是：方便 user 要砍乾淨只留必要的東西的場合。 -- 2016-09-06 18:35:00\\n    o  像 3htm/f/hte.f, 3htm/f/ls.f 是很多人 (3hta, 3nw, 3ce, 3ca, ...) 共用的也都是放在\\n    3htm/f 之下, 這樣對嗎? --> 對, 只要不是全體通用的就一定要有一個代表的 application.\\n    因為 3htm 是大家的基礎, 所以 path 都含 3htm。\\n    o  例如 quit.f 這種各自都有的 module 只要放在自己的 sub-directory 之下藉由 path 定義\\n    的優先順序就可以運作無誤。當 3htm/f   正式版存在時, 在 3htm/ 實驗新版即可取代正式版，\\n    這也是 path 的作用。\\n    o  完全與 platform 無關的就放在 f/ 之下, 因為 hibernation.f 只能用在 3nw 3nd 或 3hta\\n    因此要從 f/ 移到 3nw/ 3nw/f 3nd/ 3nd/f 3hta/ 或 3hta/f 其中之一去。讓某一 application \\n    當 hibernation.f 的家可能比不同版本分放各處要好一點點，因為可以集中維護。適合分開放的\\n    也有，如 quit.f platform.f 之類。 --> 所以我把 hibernation.f 移到了 3hta/。hte.f 以及\\n    ls.f 留在 3htm/f；但是 mde.f 卻放在 3htm/ 因為 mde.f 可以刪除而前兩者則因為用得多而視\\n    為 application 的成分。\\n    o  因此，放在 3htm/f 或 3htm/ 的差別是【成熟與否】，以及【是否可以移除】。\\n    [ ] 像 box2dweb-arrow.f 就遇到問題了，這個 demo 又要 include jeforth.3we\\\\js\\\\box2dweb\\\\Box2dWeb-2.1.a.3.js \\n        又要 include arrow.f 三個 module 到處散落。Box2dWeb-2.1.a.3.js 出現在 jeforth.3we\\\\js\\\\ \\n        裡也不對。jeforth.3we 怎麼會含有這東西? 我清楚，user 可不清楚。\\n    [ ] 所以,以上這些都移進 playground 裡去才對。Demo 程式都應該放進 playground \\n        只有需要永久保存在 project 裡面的才放進各 application 裡去。\\n        [x] playground\\\\box2dweb.js\\\\ <---- working on arrow.js debugging -> <script> 裡必須用完整 path\\n        [ ] playground\\\\chipmunk.js\\\\\\n        [ ] playground\\\\flot.js\\\\\\n        [ ] playground\\\\numeric.js\\\\\\n    [x] js/jquery 有好幾版, 統一都用 jquery-1.11.2.js 吧!\\n        [x]3hta,[x]3nw,[x]3ce,[x]3htm \\n    [x] binary.js 移進 3hta/js\\n    [x] root/demo 專門用來放 demo 程式, path 要加上 demo 優先順序略低於\\n        playground [x]3hta,[x]3htm,[x]3ce,[x]3nw,[x]3nd\\n    [ ] Review before release new master\\n    [ ] Master release should not includes my local storage json files. Be careful\\n\\n[x] mytools.f 也有類似的問題 --> 拆成 misc.f for common, misc.hta.f 等給各自。\\n[x] 因此 beep.f 可以移進 misc.hta.f 裡。    \\n[x] Move mde.f to under 3htm/ because both 3htm and 3nw can use it.\\n\\n[x] bug found in ls.f when starting up 3hta super_chrome. \\n    JavaScript error : Cannot set property 'innerHTML' of undefined\\n    --> 問題出在 ls.f call autoexec 而 autoexec 又 call 'Edit box style' field 那裏面是舊版的, 因此出問題。\\n[x] 'Edit box style' 這種東西實在太煩了, 到底為什麼 font size 怎麼都調不好。\\n    [x] 乾脆把 font-size remove from common.css. The question of \\\"what\\n        is the \\\"1.1em\\\" font size refer to? To browser default is always the best. \\n        [x] remove font-size from jeforth.3we/common.css \\n        [x] em is now refer to default font-size, 1.1em that works fine now. \\n            --> so the default font-size is good enough. <=== True !!!\\n[x] 228.mp3 has to be in demo/ for alarm.f\\n[ ] Ynote 有利用 3hta 來做網頁 copy-paste 保存的中間整理. 以 table 為例子.\\n    Shift-F2 有如【內視鏡】可以編輯任何 element。值得推廣。當作 3ce 的後續教材。\\n[ ] Youtube presentation of numeric.js\\n[ ] 希望用 【Forth 的禪思】當教材來寫 jeforth 的範例。可以直接用 markdown 格式的 source\\n    寫成 ~.f 檔, 在網頁上直接練習例題, 還可以自動存進 local storage, outputbox 直接就是\\n    學習筆記，展示 jeforth 的能耐。這都是我最近這麼多改進的終極目標。\\n\\n\\\\ 以下研究利用 3ce 抓網頁文章、去廣告所要用到的手段：\\n[x] 3ce extension pages 之間可以互通資料!\\n    ex.\\n    \\\\ 送資料給某個 tab\\n    656 js: chrome.tabs.sendMessage(pop(),({tos:\\\"Hello656!\\\"}))\\n[x] 能不能從 taget page 把資料送回給 3ce extention pages? --> call 不同的 method, 下面這行\\n    command line 可以成功從 target page 把整個 body 都抓過來。target page 要先 attach 過。\\n    dropall js> $(\\\"body\\\")[0].outerHTML 826 <js> chrome.runtime.sendMessage({addr:pop(),tos:pop()})</js>\\n\\n[x] [3ce] 把 target page 的 .console3we 殺掉，然後 body.outerHTML </o> 抓過來，就可以用 Alt-F2 來分析\\n    該網頁。獲取如下 #article_content_main_block, .htmlview 等情報，從而對網頁進行整理。\\n\\n    js> $(\\\".console3we\\\")[0] js> article_content_main_block appendChild\\n    js> article_content_main_block .\\n    js> outputbox js> article_content_main_block[0] appendChild\\n    js> $(\\\".console3we\\\")[0] js> $(\\\".htmlview\\\")[0] appendChild\\n    cls js> outputbox js> $(\\\".htmlview\\\")[0] appendChild\\n\\n[x] (element.f) 希望用 ce@ :> [1] . 的方式 access HTML elements (目前只能 ce 1 過去)\\n    --> ce@ :> childNodes[i] 就對了,例如：\\n        ce@ :> childNodes[0].outerHTML </o> drop\\n        ce@ :> childNodes[1].outerHTML </o> drop\\n[ ] 3ce target page 上 see does not work well\\n> see cr\\n            name : cr (string)\\n             vid : target.f (string)\\n             wid : 5 (number)\\n            type : colon (string)\\n             cfa : 1248 (number)\\n            help : ( -- ) 到下一列繼續輸出 *** 20111224 sam (string)\\n\\n-------- Definition in dictionary --------\\n01248:  (function) <--------------------- problem!\\n01249:  (function) <--------------------- problem!\\n01250: [object Object] (object) <--------------------- problem!\\n01251:  (function) <--------------------- problem!\\n01252: RET (null)\\n---------- End of the definition -----------\\n\\n[x] (element.f) 3ce target page 怎麼沒有 include element.f 且手動 include 也無效?\\n    --> attach 完成後，target page .s 可見遺留 element.f (string) on TOS 已見問題跡象！\\n    --> element.f debug version xelement.f \\n    --> include xelement.f F7 manually, failed at the first line \\n            s\\\" xelement.f\\\" source-code-header\\n        --> other modules are not having this line? No, html5.f included correctly\\n    --> Criminal seems to be target.f because .console3we structure has been changed! I guess.\\n        --> YES!!\\n    --> Not only element.f, xelement.f but also platform.f are not included at all. Root cause\\n        ,can be seen by F12 debugger easily, is the cr command re-defined by target.f\\n        --------------------------------------\\n        VM785:1 Uncaught TypeError: vm.scroll2inputbox is not a function\\n        --------------------------------------\\n    [x] fixed\\n[x] 3ce needs a command to get TOS from target page and vise versa.\\n    --> tos<target and tos>target \\n[ ] (dictate) needs to wait for the completion of the command line on target page. \\n    [ ] The command line leaves a flag at the end, host side uses tos<target to wait \\n        for the flag that indicates the completion of the command line.\\n\\n\",\"mode\":true,\"readonly\":false}","Use 3ce to simplify a web page for keeping it":"{\"name\":\"Use 3ce to simplify a web page for keeping it\",\"readonly\":false,\"mode\":true,\"doc\":\"\\n    \\\\ 實用版只抓 article ... 正確使用 (dictate) \\n    \\\"\\\" ( flag for detecting if dictate has completed ) \\n    \\\\ Remove .console3we from the target page\\n        <text> [begin] \\n            js> $(\\\".console3we\\\")[0] removeElement js> $(\\\".console3we\\\").length not \\n        [until]\\n    \\\\ Pack up the message \\n        js> $(\\\"article\\\")[0].outerHTML ( HTML )\\n        <js> chrome.runtime.sendMessage({addr:\\\"</text> \\n        myTabId + s' \\\",tos:pop()})</js>' + (dictate) \\n    \\\\ 必要步驟等待(dictate)完成\\n        [begin] 100 nap js> tos()!=\\\"\\\" [until] nip \\n    \\\\ 在 outputbox 產生本頁然後搬到它上面去，避免沿用到 outputbox 的 style\\n        </o> constant article article js> outputbox insertBefore\\n\\n<comment>\\n\\n[x] 3ce extension pages 之間可以互通資料!\\n    ex.\\n    \\\\ 送資料給某個 tab\\n    656 js: chrome.tabs.sendMessage(pop(),({tos:\\\"Hello656!\\\"}))\\n[x] 把 target page 的 .console3we 殺掉，\\n    run: begin js> $(\\\".console3we\\\").length while js> $(\\\".console3we\\\")[0] removeElement again\\n\\n[x] 以下 \\\"實用版整頁全抓\\\" or \\\"實用版只抓 article\\\" 又碰到 (dictate) 之後不知何時可以下達後續的指令，後續指令\\n    好像會漏失。\\n    [x] reproduce\\n        s' .\\\" Hello \\\" 100 nap' (dictate) s' .\\\" World!\\\"' (dictate)\\n        --> 馬上發現 'World!' 馬上就印出來了。表示 (dictate) 完全類似 TIB command line, 有機會上手就\\n            立刻執行, 每個 (dictate) 都是獨立的 TIB event handler。\\n\\n[x] 能不能從 taget page 把資料送回給 3ce extention pages? --> call 不同的 method, 下面這行\\n    command line 可以成功從 target page 把整個 body 都抓過來。target page 要先 attach 過。\\n    \\\\ 實驗版\\n        dropall js> $(\\\"body\\\")[0].outerHTML 826 <js> chrome.runtime.sendMessage({addr:pop(),tos:pop()})</js>\\n    \\\\ 實用版整頁全抓\\n    dropall s\\\" js> $('body')[0].outerHTML <js> chrome.runtime.sendMessage({addr:\\\" \\n    myTabId + s\\\" ,tos:pop()})</js>\\\" + (dictate)\\n    \\\\ 實用版只抓 article ... (dictate) 使用不當\\n    s' [begin] js> $(\\\".console3we\\\")[0] removeElement js> $(\\\".console3we\\\").length not [until]' (dictate)\\n    dropall s\\\" js> $('article')[0].outerHTML <js> chrome.runtime.sendMessage({addr:\\\" \\n    myTabId + s\\\" ,tos:pop()})</js>\\\" + (dictate) </o> constant article \\n    article js> outputbox insertBefore \\n\\n[x] 然後 body.outerHTML </o> 抓過來，就可以用 Alt-F2 來分析\\n    該網頁。獲取如下 #article_content_main_block, .htmlview 等情報，從而對網頁進行整理。\\n\\n    js> $(\\\".console3we\\\")[0] js> article_content_main_block appendChild\\n    js> article_content_main_block .\\n    js> outputbox js> article_content_main_block[0] appendChild\\n    js> $(\\\".console3we\\\")[0] js> $(\\\".htmlview\\\")[0] appendChild\\n    cls js> outputbox js> $(\\\".htmlview\\\")[0] appendChild\\n\\n\\n</comment>\"}","很奇怪, 執行 tos<target 就會跑這行出來。2016-09-29":"{\"doc\":\"<p><p><p><p><p><p><p><p><br>&gt;&nbsp;&lt;js&gt;&nbsp;chrome.runtime.sendMessage({addr:\\\"4\\\",tos:pop()})&lt;/js&gt; &lt;=== 很奇怪, 執行 tos&lt;target 就會跑這行出來。<br><br>~ Root cause identified ~<br></p></p></p></p></p></p></p></p><p><p><p><p><p><p><p><p>發現問題當時這一行為何出現在 3ce extension page 端,原因不詳。但這一行應該出現在 target page 端無誤，那是 tos&lt;target 命令透過 message 下給 target page 時自然會發生的事情。從 3ce extension page 下任何 \\\"...\\\" (dictate) 命令過去也是一樣。既然 target page 的 .console3we 這麼重要, 先前把它殺掉的做法就疑有欠考慮。<br><br>&gt;&nbsp;.s<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0:&nbsp;undefined&nbsp;(undefined)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;[object&nbsp;Object]&nbsp;(object)<br>&nbsp;OK&nbsp;<br>&gt;&nbsp;1234&nbsp;message-&gt;tabid &lt;-------- 這樣不行, 必須照 3ce 的 message 結構<br>&nbsp;OK&nbsp;<br>&gt;&nbsp;.s &lt;-- F7<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0:&nbsp;[object&nbsp;Object]&nbsp;(object)&nbsp;<br>&nbsp;OK&nbsp;<br>&gt;&nbsp;js&gt;&nbsp;({tos:1234})&nbsp;message-&gt;tabid&nbsp;<span style=\\\"font-size: 14.4px;\\\">&nbsp;&lt;---- 就像這樣的 message 結構</span><br>&nbsp;OK&nbsp;<br>&gt;&nbsp;.s &lt;-- F7<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0:&nbsp;[object&nbsp;Object]&nbsp;(object)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1234&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4d2h&nbsp;(number) &lt;--- 成功, 正是 tos&gt;target 的功能<br>&nbsp;OK&nbsp;<br>&gt;&nbsp;js&gt;&nbsp;({tos:undefined})&nbsp;message-&gt;tabid <b>&lt;---- Problem! undefined 工作不正常。[ ] 應予防呆排除。</b><br>&nbsp;OK&nbsp;<br>&gt;&nbsp;.s &lt;-- F7<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0:&nbsp;[object&nbsp;Object]&nbsp;(object)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1234&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4d2h&nbsp;(number) &lt;--- 先前送出 undefined 的 message 無作用也無警告<br>&nbsp;OK&nbsp;<br>&gt;&nbsp;undefined&nbsp;js&gt;&nbsp;({tos:pop()})&nbsp;message-&gt;tabid&nbsp;<span style=\\\"font-size: 14.4px;\\\">&lt;--- 送出 undefined 的 message 無作用也無警告</span><br>&nbsp;OK&nbsp;<br>&gt;&nbsp;.s<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0:&nbsp;[object&nbsp;Object]&nbsp;(object)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1234&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4d2h&nbsp;(number)&nbsp;<span style=\\\"font-size: 14.4px;\\\">&lt;--- 送出 undefined 的 message 無作用也無警告</span><br>&nbsp;OK&nbsp;<br>&gt;&nbsp;:&nbsp;tos&gt;target&nbsp;(&nbsp;x&nbsp;--&nbsp;)&nbsp;\\\\&nbsp;Send&nbsp;TOS&nbsp;to&nbsp;the&nbsp;target&nbsp;page<br>&nbsp;&nbsp;&nbsp;&nbsp;js&gt;&nbsp;({tos:pop()})&nbsp;message-&gt;tabid&nbsp;;<br><br>&nbsp;OK&nbsp;<br>&gt;&nbsp;.s<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0:&nbsp;undefined&nbsp;(undefined)<br>&nbsp;OK&nbsp;<br>&gt;&nbsp;js&gt;&nbsp;({DD:44})&nbsp;tos&gt;target &lt;---- 試試看能不能送 object 過去<br>&nbsp;OK&nbsp;<br>&gt;&nbsp;.s &lt;---- F7<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0:&nbsp;[object&nbsp;Object]&nbsp;(object)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1234&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4d2h&nbsp;(number)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:&nbsp;[object&nbsp;Object]&nbsp;(object)<br>&nbsp;OK&nbsp;<br>&gt;&nbsp;(see) &nbsp;&lt;--------------- 可以送 object 滴!!<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;\\\"DD\\\":&nbsp;44<br>}&nbsp;OK&nbsp;<br>&gt;&nbsp;js&gt;&nbsp;({DD:44})&nbsp;tos&gt;target<br>&nbsp;OK&nbsp;<br>&gt;&nbsp;tos&lt;target<br><br>&gt;&nbsp;&lt;js&gt;&nbsp;chrome.runtime.sendMessage({addr:\\\"4\\\",tos:pop()})&lt;/js&gt;&nbsp;<span style=\\\"font-size: 14.4px;\\\">&nbsp;&lt;--- Problem!! 執行 tos&lt;target 就會跑這行出來。</span><br>&nbsp;OK&nbsp;&nbsp;OK&nbsp;<br>&gt;&nbsp;.s<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0:&nbsp;undefined&nbsp;(undefined)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;[object&nbsp;Object]&nbsp;(object)<br>&nbsp;OK&nbsp;<br>&gt;&nbsp;(see)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;\\\"DD\\\":&nbsp;44<br>}&nbsp;OK&nbsp;<br>&gt;&nbsp;12998877&nbsp;tos&gt;target<br>&nbsp;OK&nbsp;<br>&gt;&nbsp;tos&lt;target<br><br>&gt;&nbsp;&lt;js&gt;&nbsp;chrome.runtime.sendMessage({addr:\\\"4\\\",tos:pop()})&lt;/js&gt;<span style=\\\"font-size: 14.4px;\\\">&nbsp;</span><span style=\\\"font-size: 14.4px;\\\">&nbsp;&lt;--- Problem!! 執行 tos&lt;target 就會跑這行出來。</span><br>&nbsp;OK&nbsp;&nbsp;OK&nbsp;<br>&gt;&nbsp;.s<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0:&nbsp;undefined&nbsp;(undefined)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1:&nbsp;&nbsp;&nbsp;&nbsp;12998877&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c658ddh&nbsp;(number)<br>&nbsp;OK&nbsp;<br><br>9/30'16 15:23 This problem has gone now, don't know why. Recnt definitions are :</p></p></p></p></p><p><br><br>: tos&lt;target ( -- x ) \\\\ Get and consumes the TOS of 3ce target page<br> &nbsp; &nbsp;char NotYet s' &lt;js&gt; chrome.runtime.sendMessage({addr:\\\"'<br> &nbsp; &nbsp;myTabId + s' \\\",tos:pop()})&lt;/js&gt;' + (dictate) <br> &nbsp; &nbsp;begin js&gt; tos()==\\\"NotYet\\\" while 100 nap repeat nip ;<br><br>: tos&gt;target ( x -- ) \\\\ Send TOS to the target page<br> &nbsp; &nbsp;js&gt; ({tos:pop()}) message-&gt;tabid ;<br><br>they work fine so far.</p></p><p><p>&nbsp;</p></p></p><p><p><p>&nbsp;</p></p></p></p>\",\"mode\":false,\"readonly\":false}"}