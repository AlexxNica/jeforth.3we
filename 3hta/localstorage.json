{"autoexec":"{\"doc\":\"\\njs: outputbox.style.fontSize=\\\"1.5em\\\"\\njs: inputbox.style.fontSize=\\\"1.5em\\\"\\n\\njs> vm.appname char jeforth.3hta = [if] [else]\\n    .( Launch the briefing ) cr\\n    <o> <iframe name=\\\"An introduction to jeforth.3ce\\\" width=\\\"96%\\\" height=\\\"1000\\\" align=\\\"center\\\" src=\\\"http://note.youdao.com/share/?id=79f8bd1b7d0a6174ff52e700dbadd1b2&amp;type=note\\\" frameBorder=\\\"1\\\" marginWidth=\\\"1\\\" marginHeight=\\\"1\\\" scrolling=\\\"Yes\\\"> </iframe></o> drop\\n    cr cr \\n[then]\\n\\n.( Execute the 'list' command that lists all local storage fields ) cr\\nlist\\n\",\"mode\":true,\"readonly\":false}","Play with numeric.js":"{\"doc\":\"\\ncls \\n\\\\ Linear algebra example. We start with a matrix.\\n<js>\\nvar A = [[1,2,3],\\n         [4,5,6],\\n         [7,3,9]]; A </jsV> value A\\n\\n\\\\ Let's also make a vector.\\n<js> var x = [3,1,2]; x </jsV> value x\\n\\n\\\\ Matrix-vector product.  b = A (.) x\\n<js> var b = numeric.dot(vm.g.A,vm.g.x); b </jsV> value b b (see)\\n\\n\\\\ Matrix inverse.  ~A \\n<js> var Ainv = numeric.inv(vm.g.A); Ainv </jsV> value Ainv \\nAinv (see)\\n\\n\\\\ Let's check it:   ~A (.) b = x Bingo!!!!\\n<js> numeric.dot(vm.g.Ainv,vm.g.b); </jsV> (see)\\n\\n\\\\ Determinant\\n<js> numeric.det(vm.g.A); </jsV> cr tib. \\n\\n\\\\ Sin wave\\n<js> var x = numeric.linspace(0,6.3,25); x </jsV> to x x (see)\\n\\n<js> var y = numeric.sin(vm.g.x); y </jsV> value y y (see)\\n\\n\\n\\n\\nstop\\njs> numeric tib.\\n\\nstop\\njs> vm.appname==\\\"jeforth.3hta\\\" [if] char js/numeric-1.2.6.js\\n[else] char http://www.numericjs.com/lib/numeric-1.2.6.js [then]\\nreadTextFile \\\\ 先讀取 .js 檔, 但不能直接用\\n<text> \\nwindow.numeric = numeric;  // 先對 source 做一點必要的加工, 把 numeric 掛上 global \\n</text> + </js> \\\\ 然後才執行\\t\\n\\nstop\\n\\\\ Also hosted on BootCDN.cn\\n\\\\ http://cdn.bootcss.com/numeric/1.2.6/numeric.js\\n\\n\\\\ These lines works fine! Test ok on 3ce, 3hta ADO reads only local files\\n\\\\ so the path should be only \\\"js/numeric-1.2.6.js\\\",\\n\\nchar     http://localhost:8888/js/numeric-1.2.6.js     readTextFile tib.\\nchar http://www.numericjs.com/lib/numeric-1.2.6.js     readTextFile tib.\\nchar http://www.numericjs.com/lib/numeric-1.2.6.min.js readTextFile tib.\\n\\n\\n\",\"mode\":true,\"readonly\":false}","Log 2016/05/17":"{\"doc\":\"[ ] tutor-cloth.f console3we strange. \\n    [ ] Improve the scrollto position. \\n    [ ] Font size not consistant either.\\n[ ] Youtube presentation of numeric.js\\n[ ] GitHub read me should feature the published 3ce Chrome extension.\\n\\n\\n[x] @ 3ce, ls.dump failed in cases\\n    > ls.dump 3hta/localstorhage.json\\n    JavaScript error on word \\\"stopSleeping\\\" : Unexpected end of JSON input\\n    > ls.dump doc/archive.json\\n    ... 有印出來 ...\\n    JavaScript error on word \\\"stopSleeping\\\" : Cannot read property 'length' of undefined\\n    [x] 不知何故, 然發現 3hta, 3nw 的 platform.f 裡 storage.restore() 都有用到 execute(\\\"readTextFile\\\") \\n        這種東西。它們的 readTextFile() 都是同步的，而且出問題的是 3ce 應該沒關係。\\n    [x] 3ce 對 localStorage 的 access 可能引發背後的 I/O 動作，變成 \\\"stopSleeping\\\" 的問題？\\n        --> 如果以下的解法 OK 這個就不是原因。\\n    [x] 上面 stopSleeping 都是 event handler 去打到甚麼了? --> study 3htm\\\\f\\\\readtextfile.f ...\\n        --> 這改不了,看不出問題。只好假設 3htm\\\\f\\\\readtextfile.f 給的｢接地時間」不夠\\n\\n[x] js> storage.read(\\\"3hta/localstorage.json\\\") <--- 失敗, 因用到 readTextFile 用在 3ce 的\\n    js function 裡是不行的! 在 3htm, 3ce 中 readTextFile 是內部會｢接地」的,在 js code 裡用\\n    execute(\\\"readTextFile\\\") 去用它, 還沒做完就馬上回來了！！ \\n    ==> 根本不需要 storage.read() 在 3htm/f/platform.f 裡。直接寫 ls.dump 就可以了。\\n\\n: (ls.dump) ( pathname -- ) \\\\ Dump the entire json file in localstorage.json format \\n\\treadTextFile ( \\\"json\\\" ) \\n\\t\\\\ resolve utf-8 BOM ss.charCodeAt(0)==65279 that's utf-8 BOM \\n\\tjs> tos().charCodeAt(0)==65279 if js> pop().slice(1) then ( \\\"json\\\" )\\n\\tjs> JSON.parse(pop()) ( hash )\\nt.b.d \\n\\t;\\n\\n[x] ls.f (ed) 要改成 ( hash \\\"fieldname\\\" -- ) <-- No, 已經牽連太深了。 ls.dump 另外做介面而不引用 ed。\\n[x] 3hta platform.f 應該只要提供 window.localStorage, window.storage.save(), window.storage.restore() 即可。\\n    3nw  platform.f 應該只要提供 window.storage.save(), window.storage.restore() 即可。\\n    其他 window.storage methods like .set(), .get(), .del(), .all(), and .read() 都由 3htm/f/platform.f 負責。\\n    --> ^2016-05-27 17:26:37 改好了, try . . . Done. 如今 window.storage.all() 就是 localStorage, \\n        裡面的實情可以隨 platform 自由設計。\\n[x] ls.f improved export-all add import-all \\n    [/] --> 改成 ls.export, ls.export-all, ls.import-all <--- 算了, forget them.\\n[x] need a new command ls.dump to dump the entire local storage. <--- Done!!\\n[x] local storage ed editor textarea wrap on/off \\n    js> $(\\\"textarea\\\",\\\".eb\\\").length . \\\\ 先查看,確定目標只有一個,以免動錯對象\\n    js> $(\\\"textarea\\\",\\\".eb\\\").attr(\\\"wrap\\\") . \\\\ 查看目前狀態是 \\\"on\\\" 還是 \\\"off\\\"\\n    js: $(\\\"textarea\\\",\\\".eb\\\").attr(\\\"wrap\\\",\\\"on\\\") \\\\ 這個例子把它 turn \\\"on\\\"\\n    --> 增加這個按鈕... 可以不必, 用以下的 One-liner 一行搞定, 先 focus 在目標 textarea \\n        用 Ctrl-Enter 執行。\\n    js: $(\\\"textarea:focus\\\").attr(\\\"wrap\\\",\\\"on\\\")\\n    js: $(\\\"textarea:focus\\\").attr(\\\"wrap\\\",\\\"off\\\") \\n\\n[/] stopSleeping 要更有彈性點\\n    JavaScript error on word \\\"stopSleeping\\\" : \\n    Object doesn't support property or method 'resume'\\n    --> 發警報有時候很重要，能可多發。能不能考慮清楚之後忽略掉？ <--- forget it.\\n\\n[x] ls.f ed local storage 在 3hta 3nw 下需要一個 search command. Total commander F3 search\\n    localstorage.json 也行, 但看不出是哪個 field。 用 notepad++ 的 json viewer 看看.....\\n    --> 的確, 用 Notepad++ Plugin JSTool 的 JSFormat Ctrl-Alt-m 就可以把一整團的 minimized JSON \\n        整理成容易閱讀的形式, 然後再 search 即可看出東西在哪個 field 裡。\\n\\n[/] ls.f ed local storage 忘了先 git pull sync 過就 edit 了, 這很麻煩。只好先 save localstorage.json\\n    到旁邊, 然後再 sync. 用 3nw 的 js: storage.restore(\\\"drive/path/localstorage.json\\\") 即可讀進來，\\n    看改了甚麼在 copy 回 3hta 正軌。 localstorage fields 改了甚麼真的不好比對,怎麼辦? \\n\\n[x] Ctrl-s in ed on 3hta triggers log.save!!\\n    ^2016-05-20 13:40:17 Now press Ctrl-s in ls.f ed code mode causes an unexpected DIV!\\n      0: [object HTMLDivElement] (object)\\n      1: [object HTMLDivElement] (object)\\n    --> fixed. see ls.f ed \\\"[Closed] eb editbox from snapshot can't save now!\\\"\\n\\n[x] Ctrl-s in ed on 3nw clears the article!! Ok on 3hta. (^2016-05-18 11:44:28)\\n    // this.value=this.innerText; 這會造成 3nw 把整個 textarea 都清掉!! 幸好用不著 <--- 錯!!\\n    [x] 必須找出原因，否則 HTML mode 下辛苦寫半天的筆記即使有 save 經 close 之後就消失了!\\n    [x] Test case, test plan, test results ^2016-05-22 11:02:36\\n[x] Ctrl-s handler was designed for .ebtextarea only, that's why press it when in Browse mode\\n    triggers the log.save handler! --> done and tested <^2016-05-22 11:02:36\\n\\n[x] index.html 這段舊方法應該可以糾正了, 用 element.style. something 取代原來的寫法\\n    <!-- 分別定義 textarea:focus 才可以隨時修改，隨 editMode 改變顏色 -->\\n    <!-- 其實是 common.css 之外非 link 定義的 style 才可以隨時修改 -->\\n    〈style id=styleTextareaFocus type=\\\"text/css\\\"〉 \\n\\t/* .console3we */ textarea:focus {\\n\\t    background:#E0E0E0;\\n\\t}\\n    〈/style〉\\n    --> 3hta link of common.css move to after html5.f, actually 3htm/f/platform.f \\n        [x]jeforth.hta [x]index.html [x]jeforth.3ce.html [x]jeforth.3nw.html\\n    --> 果然成功了 \\n        js: $(\\\".console3we\\\")[0].style.backgroundColor=\\\"yellow\\\" \\\\ 有效但是看不出來,因為被 outputbox 遮住。\\n        js> $(\\\"div\\\",\\\".console3we\\\").css(\\\"backgroundColor\\\") \\\\ ==> rgb(240, 240, 240) OK \\n        js: $(\\\"div\\\",\\\".console3we\\\").css(\\\"backgroundColor\\\",\\\"transparent\\\") \\\\ 把 outputbox 改成透明,背後的黃色背景就會呈現。\\n    [x] 先把 outputbox 改成 transparent, 然後試試 flot ... failed\\n        js: $(\\\"#outputbox\\\",\\\".console3we\\\").css(\\\"backgroundColor\\\",\\\"transparent\\\")\\n    [x] 直接改 flotzone :: style.background=\\\"transparent\\\" 再試試... 也不行。\\n    [x] 照原來的範圍改 ... 還是不行。\\n        js: $(\\\"div\\\",\\\".console3we\\\").css(\\\"backgroundColor\\\",\\\"transparent\\\")\\n    [x] 從 .console3we 外成功了, 搬進來試試 --> 問題出現！\\n        再搬回 .console3we 外 ... 好了! \\n    [x] 上面的改法不行, 因為是疊加在 header 版之上。直接改 head 裡的 style 應該可以 ... Bingo!\\n        js> $(\\\"style\\\")[0].innerHTML=null 這麼一改, 就把已呈現問題的 flot graph 治好了。\\n    [x] 既然 style 是疊加上去的, 在 flot 之後再另外設定 outputbox 的 background 應該可以。\\n        --> 試過了, 不行。 See ls.js ed \\\"[RI] flot graph 消失的 key factor\\\"\\n\\n    \\\\ 這段程式可以找出 jeforth.3we common.css style 裡有 background 的那一行,把它刪除。\\n    js> $(\\\"#commoncss\\\").outerHTML .\\n    ss :> split(\\\"\\\\n\\\")\\n    constant aa\\n    <js>\\n    for (var i=0; i<vm.g.aa.length; i++){\\n    if(vm.g.aa[i].indexOf(\\\"background:#F0F0F0\\\")==-1) push(tos()+vm.g.aa[i]+'\\\\n');\\n    }\\n    </js>\\n\\n[x] (on 3HTA) ls.f ed issue: \\n    Very strange bug\\n    These two lines will be executed when click [Read] button\\n    <h>\\n        〈link rel=\\\"stylesheet\\\" href=\\\"../simplemde-markdown-editor/src/css/simplemde.css\\\"〉\\n        〈script src=\\\"../simplemde-markdown-editor/src/js/simplemde.js\\\"〉〈/script〉\\n    </h>\\n    --> and JavaScript error on word \\\"doElement\\\" : 發生錯誤，無法完成操作 80020101。\\n    --> The most strange is that, may because of the same reason, simpleMDE.js alredy\\n        included in 3NW !!\\n            js> $(\\\"script\\\").length . \\\\ ==> 4\\n            js> $(\\\"script\\\")[3].src . \\\\ ==> file:///C:/Users/hcche/Documents/GitHub/simplemde-markdown-editor/src/js/simplemde.js\\n    3hta ls.f ed read 本 log 時會跳出來問允不允許 cookie !!!\\n    [x] make a test.js that alerts\\n        <h> 〈script src=\\\"playground/test.js\\\"〉〈/script〉</h>\\n        [x] 哈! 真的一 read 本 ed 就被執行到了! 原因應該是 eb.textarea copy 給 eb.htmlarea 時發生的。\\n            In command \\\"eb.content.code\\\".\\n    --> 即 eb.content.code 如下一行, 這下怎麼辦？既要效果又不要意外執行到 script。 \\n        $(\\\".ebhtmlarea\\\",tos()).html($(\\\".ebtextarea\\\",tos())[0].value);\\n    --> 那就是把 <h> <o> <e> sections 裡面的 <> 改成 & l t ; , & g t ; 這太難了!!\\n    --> 用 <<scr ipt>> 取代看好不好？預感不行, 果然不行。照樣會被執行到。\\n    [x] 用中文的〈script src=\\\"playground/test.js\\\"〉鐵定好了。所有的 RegEx(/\\\\s<\\\\w/) 都要注意。\\n        script, iframe, link, style, ... 專門為這些 tag 發警報就好了呀!   \\n    [x] 發現 eb.read 會沒必要地 call 到 eb.content.code (因為script, iframe, link, style,警報跳出)\\n        --> 略事改良,好了。現在讀進 HTML article 會有兩個警告, 一個是說原本在 textarea 裡的 < > 可能會被\\n            改成 &lt; &gt;, 另一個是發現有 script,style 等也發警報。警報太多, 但先這樣吧！\\n    [x] eb.content.code 加上警告是因為發現在 code mode 讀進有這些 tag 的資料時會意\\n        外地在 htmlarea 生效。其實只需要在 textarea code mode 裡編輯的內容,怎麼會有\\n\\t這種問題？整套設計太混亂了 <---- ^2016-05-22 15:33:49 最後一個 bug 是 script,style 警告之後被\\n        user cancel 就應該留在 code mode 也就是把 field.mode 改成 true, 這點原來漏做, 因此要嘛硬闖\\n        browse mode 出問題, 要拒絕之後沒有切回 code mode 因此留在 browse mode 而 .ebhtmlarea 是空的!\\n        .ebhtmlarea.innerHTML 會自動正確分辨 HTML tags 以及文章中的 < > 等符號。但是因為 HTML document\\n        裡面兩者都混再一起, 故某些 <style>...</style> 其實是 text 也被保留沒有轉成 &lt; &gt; !!! 經詢問\\n        時先拒絕, 手動改成 &lt;style 之後再轉成 browse mode 沒有 script,style warning 就好了。\\n\\n[x] How to change SimpleMDE font family and font size?\\n    > js> $(\\\".mdbox\\\").css(\\\"font-size\\\") . \\\\ ==> 20px OK \\n    > js> $(\\\".mdbox\\\").css(\\\"font-family\\\") . \\\\ ==> 'Microsoft Yahei' OK \\n    \\\\ 改 font-size\\n        js> $(\\\".mdbox\\\").css(\\\"font-size\\\",\\\"18px\\\");$(\\\".mdbox\\\").css(\\\"font-size\\\") tib.\\n    \\\\ 改 font-family\\n        <js> $(\\\".mdbox\\\").css(\\\"font-family\\\",\\\"courier\\\");$(\\\".mdbox\\\").css(\\\"font-family\\\")</jsV> tib.\\n        <js> $(\\\".mdbox\\\").css(\\\"font-family\\\",\\\"Microsoft Yahei\\\");$(\\\".mdbox\\\").css(\\\"font-family\\\")</jsV> tib.\\n\\n[x] 控制 SimpleMDE -- height\\n    js> $(\\\".CodeMirror\\\").css(\\\"height\\\",\\\"550px\\\");$(\\\".CodeMirror\\\").css(\\\"height\\\") tib. \\\\ <---- it works!\\n    > js> $(\\\".CodeMirror\\\").css(\\\"width\\\",\\\"90%\\\") . \\\\ <---- it works\\n    [object Object] OK \\n    > js> $(\\\".CodeMirror\\\").css(\\\"width\\\") . \\\\ ==> 1013px OK \\\"90%\\\" expected but it's in pixel.\\n    > js> $(\\\".CodeMirror\\\").css(\\\"height\\\") . \\\\ ==> 300px OK 表示有機會\\n    [object Object] OK \\n    > js> $(\\\".CodeMirror\\\").css(\\\"height\\\",\\\"250px\\\") . <---- it works! \\n    [object Object] OK \\n    > js> $(\\\".CodeMirror\\\").css(\\\"height\\\",\\\"200px\\\") . <---- 自動 變成 300px, 有防呆機制。\\n    [object Object] OK \\n    > js> $(\\\".CodeMirror\\\").css(\\\"height\\\") . \\\\ ==> 300px OK \\n\\n[x] SimpleMDE 有個問題, 讀入新檔時, 若原先在 Preview mode 因為不會自動切成\\n    edit mode 看起來好像無反應。 --> 自動先切成 edit mode 然後才讀進檔案。\\n    Full screen & side-by-side 根本碰不到 [Load] button 因此不用考慮。\\n    [x] Check SimpleMDE current mode\\n        > js> $(\\\".md\\\").length . \\\\ ==>   1 OK \\n        > js> $(\\\".md\\\")[0].mde . \\\\ ==>   [object Object] OK \\n        > js> $(\\\".md\\\")[0].mde.isPreviewActive() . \\\\ ==> false OK \\n        > js> $(\\\".md\\\")[0].mde.isSideBySideActive() . \\\\ ==> false OK \\n        > js> $(\\\".md\\\")[0].mde.isFullscreenActive() . \\\\ ==> false OK \\n    [x] Alert() when in preview mode.\\n\\n[x] to play flot, need to read markdown document in flot project, so \\n    try \\\"simplemde\\\" first <--- which is done now ^2016-05-10 09:02:53 \\n\\n[x] design pickFile for 3nw\\n    --> see Ynote: \\\"jeforth.3we fix pickFile problem on 3nw. Get full path of local file\\\"\\n\\n[x] on 3NW,\\n    <js> var simplemde = new SimpleMDE();simplemde</jsV> constant simplemde\\n    --> JavaScript error : SimpleMDE is not defined <-- Use BootCDN.cn can be better\\n        The including process takes time too. \\n    --> Check SimpleMDE where went? <--- window.SimpleMDE() is a function which\\n        is the constructor.\\n\\nstop\\n[/] to play flot, need to read markdown document in flot project, so try \\\"simplemde\\\" first\\n\\nchar ../simplemde-markdown-editor/src/css/simplemde.css readTextFile .\\nchar ../simplemde-markdown-editor/src/js/simplemde.js  readTextFile .\\n\\n\\n[x] NW.js is buggy. textarea wrap=off does not work !! --> Upgrade to new version then ok.\\n    nwjs-sdk-v0.14.3-win-x64.zip is OK. pickFile oncancel() event is also requiring the new\\n    NW.js. \\n\\nstop\\njs> vm.appname==\\\"jeforth.3hta\\\" [if] char js/numeric-1.2.6.js\\n[else] char http://www.numericjs.com/lib/numeric-1.2.6.js [then]\\nreadTextFile \\\\ 先讀取 .js 檔, 但不能直接用\\n<text> \\nwindow.numeric = numeric;  // 先對 source 做一點必要的加工, 把 numeric 掛上 global \\n</text> + </js> \\\\ 然後才執行\\t\\n\\nstop\\n\\n[x] How to include numeric.js? It needs a workaround.\\n    In example of jeforth.3we\\\\js\\\\numeric-1.2.6.js, it does not work to:\\n    include.js http://rawgit.com/hcchengithub/jeforth.3we/develop/js/numeric-1.2.6.js \\n    because the module assumes itself is included by HTML head while it's not in this case.\\n    Note: It does not work due to that <js></js> is volatile in 3nw, 3htm, 3ce and 3hta, \\n    while it's under global in Node.js.\\n    --> Workaround is:\\n        char http://www.numericjs.com/lib/numeric-1.2.6.js\\n      \\\\ char http://rawgit.com/hcchengithub/jeforth.3we/develop/js/numeric-1.2.6.js \\n\\treadTextFile \\\\ 先讀取 .js 檔, 但不能直接用\\n\\t<text> \\n\\twindow.numeric = numeric;  // 先對 source 做一點必要的加工, 把 numeric 掛上 global \\n\\t</text> + </js> \\\\ 然後才執行\\t\\n\\t\\n: snapshot ( -- ) \\\\ Save outputbox to a ed\\n    (ed) ( eb ) now t.dateTime ( eb now ) js: $(\\\".ebname\\\",tos(1))[0].value=pop()\\n    js: $(\\\".ebtextarea\\\",tos())[0].value=outputbox.innerHTML ( eb ) \\\\ load the content\\n    dup eb.content.code dup eb.appearance.browse ( eb ) \\\\ correct appearance mode\\n    js: $(\\\".ebsaveflag\\\",pop())[0].checked=false \\\\ Not saved yet, up to users decision\\n    ;\\n\\nstop\\n    dup eb.content.browse eb.appearance.browse ;\\n\\nstop\\n[x] log.save (actually the \\\"snapshot\\\" command saves outputbox to an ed box) goes to \\n    local storage. No more log.things will be added. ^2016-05-30 10:49:23\\n[x] check HTML li il or something else that support \\\"[x]\\\" and indent.\\n    --> play with this article http://www.marcofolio.net/css/8_different_ways_to_beautifully_style_your_lists.html\\n    --> Use the old way, accept it. No indent afterall. ^2016-05-30 10:54:10\\n[x] let <e> support comments but be careful, ... no no problem.\\n    --> good to use /* comments */ in them.\\n[x] what if local storage usage become huge? An archive method is needed.\\n    --> Simply move to doc/archive.json manually.\\n\\n\\n[x] optimize [x]platform.f ls.f and editor.f\\n    --> forget it. Let things come out as it be.\\n[x] Ctrl-s 竟然會自動補上 HTML closing tag !! \\n    --> it seems like editor.f's Ctrl-S. --> Yeah, 這個問題同 <^2016-05-18 11:44:28 \\n        當 ed textarea copy 給 htmlarea 時, 用的是 $.html() 所以然。\\n[x] HTA can open only one window, don't know why. Use that one anyway.\\n[/] improve (export) , it's ok now but ugly.\\n    Use local-storage-field-editable? to improve it.\\n    --> Let it be, we have better things to do.\\n\\nstop\\neb.open check it out, if ok, go on, if not, JSON.stringify() can make it a string and show.\\nand by the way make it a readonly.\\n[x] how about an array? field is array and stringify is ok.\\n    ==> stringify() can handle anything if only not a recursing object.\\n\\nstop\\n--- marker --- dropall cls \\n: local-storage-field-editable? ( name -- field boolean ) \\\\ Check if the object is a local storage editable document\\n    js> storage.get(pop()) >r \\n    js> typeof(rtos())==\\\"object\\\" if\\n      js> typeof(rtos().doc)==\\\"string\\\"\\n      js> typeof(rtos().mode)==\\\"boolean\\\"\\n      js> typeof(rtos().readonly)==\\\"boolean\\\"\\n      and and ( boolean )\\n    else \\n      false ( boolean )\\n    then r> swap ;\\nchar autoexec local-storage-field-editable? .s\\nstop\\n\\n--- marker --- dropall cls \\n: local-storage-field-editable? ( name -- field boolean ) \\\\ Check if the object is a local storage editable document\\n    js> storage.get(pop()) ( field ) \\n    js> typeof(tos())==\\\"object\\\" if\\n      js> typeof(tos().doc)==\\\"string\\\"  ( field boolean ) \\n      js> typeof(tos(1).mode)==\\\"boolean\\\"  ( field boolean boolean ) \\n      js> typeof(tos(2).readonly)==\\\"boolean\\\"  ( field boolean boolean boolean )  \\n      and and ( field boolean )\\n    else \\n      false ( field boolean )\\n    then ;\\nchar x local-storage-field-editable? .s\\nstop\\njs> storage.get(\\\"autoexec\\\") js> typeof(pop()==\\\"object\\\") . \\nstop \\n\\njs: storage.set(\\\"x\\\",{aa:11})\\njs: storage.set(\\\"y\\\",\\\"我的大好是天\\\")\\njs: storage.set(\\\"z\\\",[\\\"aa\\\",123,\\\"bb\\\"])\\n\\nstop\\njs> storage.get(\\\"autoexec\\\") js> typeof(tos().doc)==\\\"string\\\"&&typeof(tos().mode)==\\\"boolean\\\"&&typeof(tos().readonly)==\\\"boolean\\\" .\\n\\n\\nstop\\n\\n[x] I twisted the ls.f to bring in the older code into new eb format of \\n    doc,readonly,mode and it works for autoexec but can't edit unless \\n    after saved!!?? --> fixed, haha bug.\\n\\n[x] The problem of local storage edit box lose the focus to inputbox has fixed.\\n    I already have a treatment in forthConsoleHandler() for Ctrl-Enter to NOT focus on \\n    to inputbox after running a TIB. So, simply do inputbox.blur() has solved the \\n    problem. -- 2016/4/29 13:51\\n\\n<br><br>\\n[x] Local storage fields may not edit box document. How to avoid them from being opened by\\n    edit box? \\n    An edit box document is a local storage field that has \\n    {<strong>doc</strong>,<strong>readonly</strong>,<strong>mode</strong>} fields.\\n    So this is enough to tell.\\n\\n<br><br>\\n[x] Move older log to local storage.\\n\\n[x] let ed command take the field name, makes list easier too. --> done.\\n\\n[x] Now I hope that I can use some script in tr.table. So I can click and run scripts.\\n    That requires a Security Policy:\\n    Refused to execute inline event handler because it violates the following Content \\n    Security Policy directive: \\\"script-src 'self' 'unsafe-eval'\\\". Either the 'unsafe-inline' \\n    keyword, a hash ('sha256-...'), or a nonce ('nonce-...') is required to enable inline \\n    execution.\\n    But after added 'unsafe-inline' into \\\"content_security_policy\\\", reload manifest.json gets\\n    this error :\\n\\t\\t嘗試安裝這項擴充功能時顯示警告訊息：\\n\\t\\tIgnored insecure CSP value \\\"'unsafe-inline'\\\" in directive 'script-src'.\\n\\tSo, the only way is to use a function directly.\\n\\t--> 奇怪了, 那 jeforth.3ce 已經在用的 script 是怎麼能跑的?\\n\\t\\t--> inputbox 是收 element.onkeydown , defined in jeforth.3htm.js and platform.f\\n\\t\\t\\t只要不是 inline 形式的 onclick=\\\"blabla\\\" 就可以了。(嗎)\\n\\t\\t--> 那對 jeforth 很簡單哪! 先取得 element 再幫他掛上 element.onxxxx=function 即可。\\n\\t\\t\\telement.onxxxx=debugger; <--- Failed, 'degugger' unknown.\\n\\t\\t\\telement.onxxxx=\\\"dictate('blabla')\\\" <--- no error, but element.onxxxx will be null.\\n\\t\\t\\telement.onxxxx=function(){debugger} <--- OK!! 'this' is the element.\\n\\t\\t\\th1 :: onclick=function(e){dictate('.s')} <--- OK!!! it works fine.\\n\\t==> 結論就是不要寫成 inline script 就行了, 那沒問題呀!\\n\\t--> See Ynote: jeforth.3ce let tr.table to have script, do-able!\\n\\n[x] is#text? paste-string erase-#text-anchorNode\\n    ==> See Ynote: jeforth.3ce window.getSelection() 得到的 Selection object \\n        是揮發性的！不能留下來以後用。\\n\\n[x] project-k baby.html, sample.html 突然 run 起來之後 Ctrl-enter 沒有作用, F12 debugger 才看得見\\n    問題, 原來是 jQuery 掛不起來：\\n    Failed to load resource: net::ERR_NAME_NOT_RESOLVED http://ajax.microsoft.com/ajax/jQuery/jquery-1.11.2.js\\n    baby.html:48 Uncaught ReferenceError: jQuery is not defined\\n    這常有, 應該要有警告。\\n    這是 GFW 的問題, 透過 VPN 就好了。中國境內有沒有 jQuery 的 mirror?\\n    --> Yes! Baidu, Sina, and UpYun. Search \\\"CDN Library\\\" or \\\"Hosted JavaScript Libraries in China\\\"\\n        in my YNote. Project-K samples already modified to use Baidu CDN library. Better now.\\n\\n[x] 14:21 2016-04-12 jeforth.3ce startup page to advertise itself. Use YNote directly.\\n    cls <o> 〈iframe src=\\\"http://note.youdao.com/share/?id=b76172957fccf6a35b31dd7936327c3f&type=note#/\\\" \\n\\tname=\\\"An introduction to jeforth.3ce\\\" align=\\\"center\\\" width=\\\"96%\\\" height=\\\"6800px\\\" \\n\\tmarginwidth=\\\"1\\\" marginheight=\\\"1\\\" frameborder=\\\"1\\\" scrolling=\\\"Yes\\\"〉〈/iframe〉</o> er\\t\\n\\t\\n[x] Include .f or .js from GitHub is ok! Wonderful! \\n    This line works fine on the published jeforth.3ce which was installed from Chrome Web Store,\\n    include http://rawgit.com/hcchengithub/jeforth.3we/develop/3htm/f/ls.f \",\"mode\":true,\"readonly\":false}","Log 2016/05/30":"{\"doc\":\"[ ] tutor-cloth.f console3we strange. \\n    [ ] Improve the scrollto position. \\n        jsc.f : vm.jsc.bottom = function() { window.scrollTo(0,endofinputbox.offsetTop) }\\n        modifi only those quit.f should be enough. Or even easier, redefine\\n        the cr command would be enough! <-- not enough, also vm.forthConsoleHandler() too\\n        and it is redefined in 3hta\\\\f\\\\jquery.f. So, both cr and forthConsoleHandler() need\\n        to use the new function vm.scroll2inputbox() so modify it should work.\\n    [ ] Font size not consistant either.\\n[ ] Youtube presentation of numeric.js\\n[ ] GitHub read me should feature the published 3ce Chrome extension.\\n\",\"mode\":true,\"readonly\":false}"}